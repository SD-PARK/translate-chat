<!DOCTYPE html>
<html>
    <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
      <link rel="stylesheet" href="css/loginStyle.css"/>
    </head>
    <body>
      <div class="form-structor">
        <div class="signup">
          <h2 class="form-title" id="signup"><span>or</span>Sign up</h2>
          <div class="form-holder">
            <input type="text" class="input" placeholder="Name" id="signup_name" />
            <input type="email" class="input" placeholder="Email" id="signup_email" />
            <input type="password" class="input" placeholder="Password" id="signup_password" />
          </div>
          <button class="submit-btn" onclick="signupSubmit()">Sign up</button>
        </div>
        <div class="login slide-up">
          <div class="center">
            <h2 class="form-title" id="login"><span>or</span>Log in</h2>
            <div class="form-holder">
              <input type="email" class="input" placeholder="Email" id="login_email" />
              <input type="password" class="input" placeholder="Password" id="login_password" />
            </div>
            <button class="submit-btn" onclick="loginSubmit()">Log in</button>
          </div>
        </div>
      </div>
    </body>
    <script>
      console.clear();

      const loginBtn = document.getElementById('login');
      const signupBtn = document.getElementById('signup');

      loginBtn.addEventListener('click', (e) => {
        let parent = e.target.parentNode.parentNode;
        Array.from(e.target.parentNode.parentNode.classList).find((element) => {
            if(element == "slide-up") {
              signupBtn.parentNode.classList.add('slide-up')
              parent.classList.remove('slide-up')
            }
        });
      });

      signupBtn.addEventListener('click', (e) => {
        let parent = e.target.parentNode;
        Array.from(e.target.parentNode.classList).find((element) => {
          if(element == "slide-up") {
            loginBtn.parentNode.parentNode.classList.add('slide-up')
            parent.classList.remove('slide-up')
          }
        });
      });

      // Log in
      function loginSubmit() {
          const data = {
            email: document.getElementById('login_email').value,
            password: document.getElementById('login_password').value
          };
          sendPost('/login', data);
      };

      // Sign Up
      function signupSubmit() {
          const data = {
            name: document.getElementById('signup_name').value,
            email: document.getElementById('signup_email').value,
            password: document.getElementById('signup_password').value
          };
          sendPost('/signup', data);
      };

      // POST 전송
      function sendPost(url, params) {
        var form = document.createElement('form');
        form.setAttribute('method', 'post');
        form.setAttribute('action', url);
        document.charset = 'utf-8';
        for (let key in params) {
          const hiddenField = document.createElement('input');
          hiddenField.setAttribute('type', 'hidden');
          hiddenField.setAttribute('name', key);
          hiddenField.setAttribute('value', params[key]);
          form.appendChild(hiddenField);
        }
        document.body.appendChild(form);
        form.submit();
      }
    </script>
</html>